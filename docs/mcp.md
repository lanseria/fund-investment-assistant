### 1. 深度基金诊断工具 (`get_fund_details`)

**目的**：`get_portfolio` 只返回了概览。当用户问“为什么只要这只基金？”或者“这只基金现在技术面怎么样？”时，AI 需要获取详细指标。

- **功能**：获取指定基金的近期净值走势、移动平均线（MA5/20）、以及策略信号（RSI/MACD/布林带）状态。
- **输入参数 (Schema)**：
  - `fundCode` (string, 必填): 基金代码。
  - `days` (number, 选填): 获取历史数据的天数，默认 30。
- **AI 应用场景**：
  - 用户：“帮我看看 161725 现在是不是超卖了？”
  - AI 调用此工具，获取 RSI 值，发现是 25，回答：“是的，RSI 目前为 25，处于超卖区间，且昨日触发了买入信号。”

### 2. 市场情报检索工具 (`search_market_news`)

**目的**：你的系统里已经有 `newsItems`（AI 清洗后的新闻）。让 Claude 可以查阅这些“记忆”，将市场情绪与持仓联系起来。

- **功能**：在本地数据库的新闻表中进行语义或关键词搜索（或者简单的按日期/Tag过滤）。
- **输入参数 (Schema)**：
  - `query` (string, 选填): 关键词，如 "半导体", "美联储"。
  - `date` (string, 选填): YYYY-MM-DD，查特定日期。
  - `limit` (number, 选填): 返回条数。
- **AI 应用场景**：
  - 用户：“最近有什么关于医疗板块的利好吗？”
  - AI 调用此工具搜索 tag="医疗" 或 content like "%医疗%"，总结系统内的新闻库回答用户。

### 3. 交易下单工具 (`submit_trade_order`)

**目的**：这是最核心的“执行”能力。让 AI 在对话中直接帮你下单（当然是生成 Pending 状态的记录，需人工或脚本确认）。

- **功能**：向 `fund_transactions` 表插入一条状态为 `pending` 的交易记录。
- **输入参数 (Schema)**：
  - `fundCode` (string, 必填)。
  - `type` (enum, 必填): 'buy' | 'sell' | 'convert_out' | 'convert_in'。
  - `amount` (number, 选填): 买入金额。
  - `shares` (number, 选填): 卖出份额。
  - `reason` (string, 必填): 交易理由（记录在备注里，方便复盘）。
- **AI 应用场景**：
  - 用户：“既然纳指跌了这么多，帮我买 1000 块钱的 000834。”
  - AI 调用工具下单，并回复：“已为您提交买入 1000元 000834 的申请，请在每日操作页面确认。”

### 4. 待处理交易管理工具 (`manage_pending_transactions`)

**目的**：给予 AI “后悔药”或者“审核员”的能力。

- **功能**：列出当前所有 `pending` 状态的交易，或者撤销某笔特定的交易。
- **输入参数 (Schema)**：
  - `action` (enum, 必填): 'list' (列出) | 'cancel' (撤销)。
  - `transactionId` (number, 选填): 仅在 action='cancel' 时需要。
- **AI 应用场景**：
  - 用户：“我今天都挂了哪些单子？把卖出白酒的那笔撤了吧。”
  - AI 先调用 `list` 查看，找到白酒基金的 ID，然后调用 `cancel`。

### 5. 自选/持仓管理工具 (`manage_watchlist`)

**目的**：管理“关注列表”。有些基金用户没买，但是想让系统开始追踪它的净值和策略信号。

- **功能**：添加一个新的基金到持仓表（份额为0，作为关注），或者将已清仓的基金彻底删除。
- **输入参数 (Schema)**：
  - `action` (enum, 必填): 'add' | 'remove'。
  - `fundCode` (string, 必填)。
  - `fundType` (enum, 选填): 'open' | 'qdii_lof' (添加时需要)。
- **AI 应用场景**：
  - 用户：“开始帮我关注一下越南天弘基金。”
  - AI 调用工具将该代码加入数据库，系统随后的定时任务就会开始抓取它的数据。
